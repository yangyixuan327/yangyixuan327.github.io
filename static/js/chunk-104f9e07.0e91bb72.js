(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-104f9e07"],{a434:function(e,t,o){"use strict";var n=o("23e7"),i=o("23cb"),l=o("a691"),a=o("50c4"),r=o("7b0b"),s=o("65f0"),c=o("8418"),d=o("1dde"),u=o("ae40"),f=d("splice"),m=u("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,h=Math.min,g=9007199254740991,b="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!f||!m},{splice:function(e,t){var o,n,d,u,f,m,w=r(this),v=a(w.length),k=i(e,v),x=arguments.length;if(0===x?o=n=0:1===x?(o=0,n=v-k):(o=x-2,n=h(p(l(t),0),v-k)),v+o-n>g)throw TypeError(b);for(d=s(w,n),u=0;u<n;u++)f=k+u,f in w&&c(d,u,w[f]);if(d.length=n,o<n){for(u=k;u<v-n;u++)f=u+n,m=u+o,f in w?w[m]=w[f]:delete w[m];for(u=v;u>v-n+o;u--)delete w[u-1]}else if(o>n)for(u=v-n;u>k;u--)f=u+n-1,m=u+o-1,f in w?w[m]=w[f]:delete w[m];for(u=0;u<o;u++)w[u+k]=arguments[u+2];return w.length=v-n+o,d}})},b9ed:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container"},[o("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"},on:{click:e.onCreateNewClicked}},[e._v("新建"),o("i",{staticClass:"el-icon-plus el-icon--right"})]),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[o("el-table-column",{attrs:{align:"center",label:"ID",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index)+" ")]}}])}),o("el-table-column",{attrs:{label:"用户名 Username"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.name))])]}}])}),o("el-table-column",{attrs:{label:"账号 Account",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.account)+" ")]}}])}),o("el-table-column",{attrs:{label:"密码 Password",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.password))])]}}])}),o("el-table-column",{attrs:{label:"权限 Role",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.role))])]}}])}),o("el-table-column",{attrs:{align:"center",prop:"created_at",label:"Action",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,i=t.$index;return[o("el-button-group",[o("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){return e.onEditClicked(n,i)}}}),o("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.onDeleteClicked(n,i)}}})],1)]}}])})],1),o("el-dialog",{attrs:{visible:e.editDialog.visible,title:e.editDialog.title,width:"50%",center:""},on:{close:function(t){e.editDialog.visible=!1}},scopedSlots:e._u([{key:"footer",fn:function(){return[o("span",{staticClass:"dialog-footer"},[o("el-button",{on:{click:function(t){e.editDialog.visible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.editDialogConfirmOnClicked}},[e._v("确 定")])],1)]},proxy:!0}])},[o("el-form",{attrs:{model:e.form}},[o("el-form-item",{attrs:{label:"账号Account","label-width":"130px"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.account,callback:function(t){e.$set(e.form,"account",t)},expression:"form.account"}})],1),o("el-form-item",{attrs:{label:"用户名Username","label-width":"130px"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"密码Password","label-width":"130px"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),o("el-form-item",{attrs:{label:"管理员Admin","label-width":"130px"}},[o("el-switch",{model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}})],1)],1)],1)],1)},i=[],l=(o("b0c0"),o("a434"),o("c24f")),a={data:function(){return{list:null,listLoading:!0,listQuery:{page:1,limit:10},editDialog:{visible:!1,contentVisible:!0,title:""},form:{userId:-1,index:-1,name:"",account:"",password:"",role:""}}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;this.listLoading=!1,Object(l["c"])().then((function(t){console.log(t),e.list=t.data.responseMap.result,e.listLoading=!1}))},onCreateNewClicked:function(){this.editDialog.visible=!0,this.editDialog.title="新建账户",this.form.name="",this.form.account="",this.form.password="",this.form.role=!1,this.editDialog.changeMode="add"},onEditClicked:function(e,t){this.form.userId=e.userId,this.form.index=t,this.form.name=e.name,this.form.account=e.account,this.form.password=e.password,"admin"===e.role?this.form.role=!0:this.form.role=!1,this.editDialog.title="修改账户",this.editDialog.visible=!0,this.editDialog.changeMode="update"},onDeleteClicked:function(e,t){var o=this,n={userId:e.userId};this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["a"])(n).then((function(e){console.log(e),console.log(n),o.list.splice(t,1)})),o.$message({type:"success",message:"删除成功!"})})).catch((function(){o.$message({type:"info",message:"删除失败，已取消操作"})}))},editDialogConfirmOnClicked:function(e){var t=this;!0===this.form.role?this.form.role="admin":this.form.role="user";var o={name:this.form.name,account:this.form.account,password:this.form.password,role:this.form.role,index:this.form.index,changeMode:this.editDialog.changeMode};Object(l["h"])(o).then((function(e){var o=t.form.index,n=t.editDialog.changeMode,i={name:t.form.name,account:t.form.account,password:t.form.password,role:t.form.role,userId:t.form.userId};"update"===n?null!=o&&o>=0&&(t.list[o].name=t.form.name,t.list[o].account=t.form.account,t.list[o].password=t.form.password,t.list[o].role=t.form.role,Object(l["i"])(i).then((function(e){console.log(e),console.log("Updated user"+i)}))):"add"===n&&(Object(l["f"])(i).then((function(e){console.log("Create new user"+i)})),t.list.push({name:t.form.name,account:t.form.account,password:t.form.password,role:t.form.role})),t.editDialog.visible=!1}))}}},r=a,s=o("2877"),c=Object(s["a"])(r,n,i,!1,null,null,null);t["default"]=c.exports}}]);