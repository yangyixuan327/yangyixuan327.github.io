(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a94972d"],{2018:function(t,e,a){"use strict";a.d(e,"f",(function(){return o})),a.d(e,"a",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"d",(function(){return l})),a.d(e,"g",(function(){return s})),a.d(e,"b",(function(){return u})),a.d(e,"e",(function(){return c}));var n=a("2fff");function o(){return Object(n["a"])({url:"/admin/structure/examination",method:"get",params:null})}function i(t){return Object(n["a"])({url:"/admin/structure/examination",method:"put",params:t})}function r(t,e){return Object(n["a"])({url:"/admin/structure/examination/"+t,method:"post",data:e})}function l(t){return Object(n["a"])({url:"/admin/structure/examination",method:"delete",params:t})}function s(t){return Object(n["a"])({url:"/admin/test/question/searchByTestOption",method:"get",params:{testOptionId:t}})}function u(t,e){return Object(n["a"])({url:"/admin/test/paper/"+t+"/addQues",method:"put",data:e})}function c(t){return Object(n["a"])({url:"/admin/test/question/search",method:"post",data:t})}},"6beb":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-row",[a("el-col",[a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"},on:{click:t.onCreateNewClicked}},[t._v("新建"),a("i",{staticClass:"el-icon-plus el-icon--right"})])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"考试ID",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.testOptionId)+" ")]}}])}),a("el-table-column",{attrs:{label:"考试名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.testOptionName)+" ")]}}])}),a("el-table-column",{attrs:{label:"开始时间",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.startDate))])]}}])}),a("el-table-column",{attrs:{label:"时长",width:"110",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.duration))])]}}])}),a("el-table-column",{attrs:{label:"总分",width:"110",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.totalScore))])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"created_at",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button-group",[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(a){return t.onEditClicked(e.row.testOptionId,e.$index)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(a){return t.onDeleteClicked(e.row.testOptionId,e.$index)}}}),a("el-button",{attrs:{type:"warning",icon:"el-icon-s-custom"},on:{click:function(a){return t.onPickClicked(e.row.testOptionId,e.$index)}}})],1)]}}])})],1),a("el-dialog",{attrs:{visible:t.wordsDialog.visible,title:t.wordsDialog.title,width:"50%",center:""},on:{close:function(e){t.wordsDialog.visible=!1}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("span",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(e){t.wordsDialog.visible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.wordsDialogConfirmOnClicked}},[t._v("确 定")])],1)]},proxy:!0}])},[a("div",{staticStyle:{"margin-top":"8px"},attrs:{align:"center"}},[a("el-form",[a("el-form-item",{attrs:{label:"考卷名称","label-width":"120px"}},[a("el-select",{attrs:{placeholder:"请选择","popper-append-to-body":!1},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(this.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"考试名称","label-width":"120px"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.examName,callback:function(e){t.examName=e},expression:"examName"}})],1),a("el-form-item",{attrs:{label:"时长","label-width":"120px"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.duration,callback:function(e){t.duration=e},expression:"duration"}})],1)],1)],1),[a("div",{staticClass:"block"},[a("el-form",[a("el-form-item",{attrs:{label:"开始时间","label-width":"120px"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:t.timeValue,callback:function(e){t.timeValue=e},expression:"timeValue"}})],1)],1)],1)]],2)],1)},o=[],i=(a("a434"),a("d3b7"),a("b24b")),r=a("2018");a("b727");function l(t){var e=new Date(t),a=e.getFullYear(),n=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,o=e.getDate()<10?"0"+e.getDate():e.getDate(),i=e.getHours()<10?"0"+e.getHours():e.getHours(),r=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),l=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return a+"-"+n+"-"+o+" "+i+":"+r+":"+l}var s={data:function(){return{list:null,listLoading:!0,wordsDialog:{visible:!1,title:"",changeMode:"add"},timeValue:"",form:{index:-1,examId:-1,examName:"",examSelectNum:0,examJudgeNum:0,examQaNum:0,duration:0},examType:"随机生成",options:[],value:"",paperId:-1,paperName:"",duration:0,examId:-1,examName:"",index:-1,calTotalScore:0}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.listLoading=!0,Object(i["h"])().then((function(e){t.list=e.data.responseMap.result;for(var a=0;a<t.list.length;a++)t.list[a].startDate=l(t.list[a].startDate);t.listLoading=!1})),Object(i["e"])().then((function(e){for(var a=e.data.responseMap.result,n=0;n<a.length;n++)t.options.push({value:a[n].examId,label:a[n].examName})}))},onCreateNewClicked:function(){"随机生成"===this.examType?(this.wordsDialog.title="新增考试",this.form.examName=""):(this.examName="",this.value=""),this.timeValue="",this.wordsDialog.visible=!0,this.wordsDialog.changeMode="add"},onDeleteClicked:function(t,e){var a=this;this.$confirm("确认删除本场考试？此操作不可回退！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["d"])({testOptionId:t}).then((function(t){200===t.data.status?(a.$message({type:"success",message:"删除成功！"}),a.list.splice(e,1)):alert("删除失败")}))})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},onEditClicked:function(t,e){var a=this;this.examId=t,this.wordsDialog.title="编辑考试",this.timeValue=this.list[e].startDate;var n=this.list[e].selectNum+this.list[e].judgeNum+this.list[e].qaNum;this.examType=n>0?"随机生成":"勾选生成",console.log(n),n>0?(this.examName=this.list[e].testOptionName,this.form.examSelectNum=this.list[e].selectNum,this.form.examJudgeNum=this.list[e].judgeNum,this.form.examQaNum=this.list[e].qaNum,this.form.examId=t,this.form.index=e,this.form.examName=this.list[e].testOptionName,this.form.duration=this.list[e].duration):(this.index=e,this.examName=this.list[e].testOptionName,Object(i["g"])(t).then((function(t){var e=t.data.responseMap.result.length;a.paperId=t.data.responseMap.result[e-1].examId,a.paperName=t.data.responseMap.result[e-1].examName,a.value=a.paperId})),this.duration=this.list[e].duration),this.wordsDialog.visible=!0,this.wordsDialog.changeMode="update"},onPickClicked:function(t,e){this.$router.push({path:"/test_manage/exam_manage/pick_user",query:{exam_id:t}})},wordsDialogConfirmOnClicked:function(){var t=this;if("add"===this.wordsDialog.changeMode){console.log("add");var e=[];Object(r["g"])(this.value).then((function(a){for(var n=a.data.responseMap.result,o=function(a){e.some((function(t){return t===n[a].quesId}))||(t.calTotalScore+=parseInt(n[a].score),e.push(n[a].quesId),console.log("totalScore: ",t.calTotalScore))},r=0;r<n.length;r++)o(r);console.log("final: ",t.calTotalScore);var l={testOptionName:t.examName,examId:t.value,selectNum:0,judgeNum:0,qaNum:0,duration:t.duration,totalScore:t.calTotalScore,startDate:t.timeValue};Object(i["a"])(l).then((function(e){t.list.push({testOptionId:e.data.responseMap.result,testOptionName:t.examName,paperId:t.paperId,duration:t.duration,startDate:t.timeValue}),location.reload()}))}))}else if("update"===this.wordsDialog.changeMode){console.log("update");var a=[];Object(r["g"])(this.value).then((function(e){for(var n=e.data.responseMap.result,o=function(e){a.some((function(t){return t===n[e].quesId}))||(t.calTotalScore+=parseInt(n[e].score),a.push(n[e].quesId),console.log("totalScore: ",t.calTotalScore))},r=0;r<n.length;r++)o(r);console.log("final: ",t.calTotalScore);var l={testOptionId:t.examId,testOptionName:t.examName,examId:t.value,selectNum:0,judgeNum:0,qaNum:0,totalScore:t.calTotalScore,paperId:t.value,duration:t.duration,startDate:t.timeValue};Object(i["c"])(t.examId,l).then((function(e){t.list[t.index].testOptionName=l.testOptionName,t.list[t.index].paperId=l.paperId,t.list[t.index].duration=l.duration,t.list[t.index].startDate=l.startDate,t.wordsDialog.visible=!1,location.reload()}))}))}}}},u=s,c=a("2877"),d=Object(c["a"])(u,n,o,!1,null,null,null);e["default"]=d.exports},a434:function(t,e,a){"use strict";var n=a("23e7"),o=a("23cb"),i=a("a691"),r=a("50c4"),l=a("7b0b"),s=a("65f0"),u=a("8418"),c=a("1dde"),d=a("ae40"),m=c("splice"),p=d("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,h=Math.min,g=9007199254740991,b="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!m||!p},{splice:function(t,e){var a,n,c,d,m,p,x=l(this),v=r(x.length),w=o(t,v),O=arguments.length;if(0===O?a=n=0:1===O?(a=0,n=v-w):(a=O-2,n=h(f(i(e),0),v-w)),v+a-n>g)throw TypeError(b);for(c=s(x,n),d=0;d<n;d++)m=w+d,m in x&&u(c,d,x[m]);if(c.length=n,a<n){for(d=w;d<v-n;d++)m=d+n,p=d+a,m in x?x[p]=x[m]:delete x[p];for(d=v;d>v-n+a;d--)delete x[d-1]}else if(a>n)for(d=v-n;d>w;d--)m=d+n-1,p=d+a-1,m in x?x[p]=x[m]:delete x[p];for(d=0;d<a;d++)x[d+w]=arguments[d+2];return x.length=v-n+a,c}})},b24b:function(t,e,a){"use strict";a.d(e,"f",(function(){return o})),a.d(e,"b",(function(){return i})),a.d(e,"e",(function(){return r})),a.d(e,"h",(function(){return l})),a.d(e,"i",(function(){return s})),a.d(e,"g",(function(){return u})),a.d(e,"c",(function(){return c})),a.d(e,"a",(function(){return d})),a.d(e,"d",(function(){return m}));a("b775");var n=a("2fff");function o(){return Object(n["a"])({url:"/admin/user/getAll",method:"get",params:null})}function i(t,e){return Object(n["a"])({url:"/admin/test/paper/"+t+"/addUser",method:"put",data:e})}function r(){return Object(n["a"])({url:"/admin/structure/examination",method:"get",params:null})}function l(){return Object(n["a"])({url:"/admin/test/paper",method:"get",params:null})}function s(t){return Object(n["a"])({url:"/admin/test/paper/"+t+"/parUsers",method:"get"})}function u(t){return Object(n["a"])({url:"/admin/test/examByOption",method:"get",params:{testOptionId:t}})}function c(t,e){return Object(n["a"])({url:"/admin/test/paper/"+t,method:"post",data:e})}function d(t){return Object(n["a"])({url:"admin/test/paper",method:"put",data:t})}function m(t){return Object(n["a"])({url:"/admin/test/paper",method:"delete",params:t})}}}]);