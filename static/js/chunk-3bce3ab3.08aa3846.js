(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3bce3ab3"],{"078c":function(e,t,s){"use strict";s("8cab")},"5da6":function(e,t,s){},"8cab":function(e,t,s){},"9ed6":function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-container"},[s("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,"auto-complete":"on","label-position":"left"}},[s("div",{staticClass:"title-container"},[s("h3",{staticClass:"title"},[e._v("欢迎来到虚拟宠物医院学习系统")])]),s("el-form-item",{attrs:{prop:"userName"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{attrs:{"icon-class":"user"}})],1),s("el-input",{ref:"userName",attrs:{placeholder:"Account",name:"userName",type:"text",tabindex:"1","auto-complete":"on"},model:{value:e.loginForm.userName,callback:function(t){e.$set(e.loginForm,"userName",t)},expression:"loginForm.userName"}})],1),s("el-form-item",{attrs:{prop:"password"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{attrs:{"icon-class":"password"}})],1),s("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"Password",name:"password",tabindex:"2","auto-complete":"on"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),s("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[s("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1),s("el-button",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleLogin(t)}}},[e._v("Login")]),s("el-button",{staticStyle:{width:"100%","margin-left":"0px"},attrs:{type:"primary"},on:{click:function(t){e.showDialog=!0}}},[e._v("Register")])],1),s("el-dialog",{staticClass:"register",attrs:{title:"注册",visible:e.showDialog,width:"50%",center:""},on:{"update:visible":function(t){e.showDialog=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[s("span",{staticClass:"dialog-footer"},[s("el-button",{on:{click:function(t){e.showDialog=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.dialogConfirmOnClicked}},[e._v("确 定")])],1)]},proxy:!0}])},[s("el-form",{ref:"form",attrs:{model:e.form,"status-icon":"",rules:e.registerRules}},[s("el-form-item",{staticClass:"form-item",attrs:{label:"账号 Account","label-width":"120px",prop:"account"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.account,callback:function(t){e.$set(e.form,"account",t)},expression:"form.account"}})],1),s("el-form-item",{staticClass:"form-item",attrs:{label:"用户名 Username","label-width":"120px",prop:"name"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),s("el-form-item",{staticClass:"form-item",attrs:{label:"密码 Password","label-width":"120px",prop:"password"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1)],1)],1)},a=[],r=(s("b0c0"),s("61f7")),i=s("c24f"),n={name:"Login",data:function(){var e=this,t=function(t,s,o){Object(r["b"])(s)?(o(),e.validateCheck=!0):(o(new Error("Please enter the correct username")),e.validateCheck=!1)},s=function(t,s,o){s.length<6?(o(new Error("The password can not be less than 6 digits")),e.validateCheck=!1):(o(),e.validateCheck=!0)},o=function(t,s,o){s.length<6?(o(new Error("The password can not be less than 6 digits")),e.validateCheck=!1):(o(),e.validateCheck=!0)};return{loginForm:{userName:"",password:""},loginRules:{userName:[{required:!0,trigger:"blur",validator:t}],password:[{required:!0,trigger:"blur",validator:s}]},loading:!1,passwordType:"password",redirect:void 0,userType:"user",showDialog:!1,form:{name:"",account:"",password:""},registerRules:{name:[{trigger:"blur",validator:t}],account:[{trigger:"blur",validator:t}],password:[{trigger:"blur",validator:o}]},validateCheck:!1}},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},methods:{showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;e.loading=!0,e.$store.dispatch("user/login",e.loginForm).then((function(){e.$router.push({path:"/"}),e.loading=!1,e.$message({message:"登录成功",type:"success"}),console.log("登录成功!!")})).catch((function(){e.loading=!1}))}))},dialogConfirmOnClicked:function(){var e=this;if(this.form.account&&this.form.name&&this.form.password&&this.validateCheck){var t={name:this.form.name,account:this.form.account,password:this.form.password,role:"user"};Object(i["g"])(t).then((function(t){console.log("Create new user"+t),e.$message({message:"注册成功",type:"success"}),e.form=[]})),this.showDialog=!1}else this.validateCheck?this.$message({message:"请填入完整信息",type:"warning"}):this.$message({message:"请注意格式规范",type:"info"})}}},l=n,c=(s("078c"),s("b0e8"),s("2877")),u=Object(c["a"])(l,o,a,!1,null,"a6adb934",null);t["default"]=u.exports},b0e8:function(e,t,s){"use strict";s("5da6")}}]);